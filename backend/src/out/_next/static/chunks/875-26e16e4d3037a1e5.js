"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[875],{1154:(e,t,r)=>{r.d(t,{A:()=>s});let s=(0,r(9946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2960:(e,t,r)=>{r.d(t,{I:()=>q});var s=r(920),i=r(7165),n=r(9853),a=r(5910),u=r(3504),l=r(2020),o=class extends a.Q{constructor(e,t){super(),this.options=t,this.#e=e,this.#t=null,this.#r=(0,u.T)(),this.options.experimental_prefetchInRender||this.#r.reject(Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}#e;#s=void 0;#i=void 0;#n=void 0;#a;#u;#r;#t;#l;#o;#h;#c;#d;#p;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#s.addObserver(this),h(this.#s,this.options)?this.#y():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return c(this.#s,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return c(this.#s,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#m(),this.#g(),this.#s.removeObserver(this)}setOptions(e){let t=this.options,r=this.#s;if(this.options=this.#e.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,l.Eh)(this.options.enabled,this.#s))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#b(),this.#s.setOptions(this.options),t._defaulted&&!(0,l.f8)(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#s,observer:this});let s=this.hasListeners();s&&d(this.#s,r,this.options,t)&&this.#y(),this.updateResult(),s&&(this.#s!==r||(0,l.Eh)(this.options.enabled,this.#s)!==(0,l.Eh)(t.enabled,this.#s)||(0,l.d2)(this.options.staleTime,this.#s)!==(0,l.d2)(t.staleTime,this.#s))&&this.#R();let i=this.#S();s&&(this.#s!==r||(0,l.Eh)(this.options.enabled,this.#s)!==(0,l.Eh)(t.enabled,this.#s)||i!==this.#p)&&this.#O(i)}getOptimisticResult(e){var t,r;let s=this.#e.getQueryCache().build(this.#e,e),i=this.createResult(s,e);return t=this,r=i,(0,l.f8)(t.getCurrentResult(),r)||(this.#n=i,this.#u=this.options,this.#a=this.#s.state),i}getCurrentResult(){return this.#n}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),t?.(r),Reflect.get(e,r))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#s}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#y({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#y(e){this.#b();let t=this.#s.fetch(this.options,e);return e?.throwOnError||(t=t.catch(l.lQ)),t}#R(){this.#m();let e=(0,l.d2)(this.options.staleTime,this.#s);if(l.S$||this.#n.isStale||!(0,l.gn)(e))return;let t=(0,l.j3)(this.#n.dataUpdatedAt,e);this.#c=setTimeout(()=>{this.#n.isStale||this.updateResult()},t+1)}#S(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#s):this.options.refetchInterval)??!1}#O(e){this.#g(),this.#p=e,!l.S$&&!1!==(0,l.Eh)(this.options.enabled,this.#s)&&(0,l.gn)(this.#p)&&0!==this.#p&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||s.m.isFocused())&&this.#y()},this.#p))}#v(){this.#R(),this.#O(this.#S())}#m(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#g(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(e,t){let r,s=this.#s,i=this.options,a=this.#n,o=this.#a,c=this.#u,f=e!==s?e.state:this.#i,{state:y}=e,v={...y},m=!1;if(t._optimisticResults){let r=this.hasListeners(),a=!r&&h(e,t),u=r&&d(e,s,t,i);(a||u)&&(v={...v,...(0,n.k)(y.data,e.options)}),"isRestoring"===t._optimisticResults&&(v.fetchStatus="idle")}let{error:g,errorUpdatedAt:b,status:R}=v;r=v.data;let S=!1;if(void 0!==t.placeholderData&&void 0===r&&"pending"===R){let e;a?.isPlaceholderData&&t.placeholderData===c?.placeholderData?(e=a.data,S=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,void 0!==e&&(R="success",r=(0,l.pl)(a?.data,e,t),m=!0)}if(t.select&&void 0!==r&&!S)if(a&&r===o?.data&&t.select===this.#l)r=this.#o;else try{this.#l=t.select,r=t.select(r),r=(0,l.pl)(a?.data,r,t),this.#o=r,this.#t=null}catch(e){this.#t=e}this.#t&&(g=this.#t,r=this.#o,b=Date.now(),R="error");let O="fetching"===v.fetchStatus,w="pending"===R,C="error"===R,I=w&&O,Q=void 0!==r,q={status:R,fetchStatus:v.fetchStatus,isPending:w,isSuccess:"success"===R,isError:C,isInitialLoading:I,isLoading:I,data:r,dataUpdatedAt:v.dataUpdatedAt,error:g,errorUpdatedAt:b,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>f.dataUpdateCount||v.errorUpdateCount>f.errorUpdateCount,isFetching:O,isRefetching:O&&!w,isLoadingError:C&&!Q,isPaused:"paused"===v.fetchStatus,isPlaceholderData:m,isRefetchError:C&&Q,isStale:p(e,t),refetch:this.refetch,promise:this.#r};if(this.options.experimental_prefetchInRender){let t=e=>{"error"===q.status?e.reject(q.error):void 0!==q.data&&e.resolve(q.data)},r=()=>{t(this.#r=q.promise=(0,u.T)())},i=this.#r;switch(i.status){case"pending":e.queryHash===s.queryHash&&t(i);break;case"fulfilled":("error"===q.status||q.data!==i.value)&&r();break;case"rejected":("error"!==q.status||q.error!==i.reason)&&r()}}return q}updateResult(){let e=this.#n,t=this.createResult(this.#s,this.options);this.#a=this.#s.state,this.#u=this.options,void 0!==this.#a.data&&(this.#h=this.#s),(0,l.f8)(t,e)||(this.#n=t,this.#w({listeners:(()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!this.#f.size)return!0;let s=new Set(r??this.#f);return this.options.throwOnError&&s.add("error"),Object.keys(this.#n).some(t=>this.#n[t]!==e[t]&&s.has(t))})()}))}#b(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#s)return;let t=this.#s;this.#s=e,this.#i=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#w(e){i.jG.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#n)}),this.#e.getQueryCache().notify({query:this.#s,type:"observerResultsUpdated"})})}};function h(e,t){return!1!==(0,l.Eh)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&c(e,t,t.refetchOnMount)}function c(e,t,r){if(!1!==(0,l.Eh)(t.enabled,e)&&"static"!==(0,l.d2)(t.staleTime,e)){let s="function"==typeof r?r(e):r;return"always"===s||!1!==s&&p(e,t)}return!1}function d(e,t,r,s){return(e!==t||!1===(0,l.Eh)(s.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&p(e,r)}function p(e,t){return!1!==(0,l.Eh)(t.enabled,e)&&e.isStaleByTime((0,l.d2)(t.staleTime,e))}var f=r(2115),y=r(6715);r(5155);var v=f.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),m=()=>f.useContext(v),g=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&!t.isReset()&&(e.retryOnMount=!1)},b=e=>{f.useEffect(()=>{e.clearReset()},[e])},R=e=>{let{result:t,errorResetBoundary:r,throwOnError:s,query:i,suspense:n}=e;return t.isError&&!r.isReset()&&!t.isFetching&&i&&(n&&void 0===t.data||(0,l.GU)(s,[t.error,i]))},S=f.createContext(!1),O=()=>f.useContext(S);S.Provider;var w=e=>{if(e.suspense){let t=e=>"static"===e?e:Math.max(e??1e3,1e3),r=e.staleTime;e.staleTime="function"==typeof r?(...e)=>t(r(...e)):t(r),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,1e3))}},C=(e,t)=>e.isLoading&&e.isFetching&&!t,I=(e,t)=>e?.suspense&&t.isPending,Q=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function q(e,t){return function(e,t,r){var s,n,a,u,o;let h=O(),c=m(),d=(0,y.jE)(r),p=d.defaultQueryOptions(e);null==(n=d.getDefaultOptions().queries)||null==(s=n._experimental_beforeQuery)||s.call(n,p),p._optimisticResults=h?"isRestoring":"optimistic",w(p),g(p,c),b(c);let v=!d.getQueryCache().get(p.queryHash),[S]=f.useState(()=>new t(d,p)),q=S.getOptimisticResult(p),T=!h&&!1!==e.subscribed;if(f.useSyncExternalStore(f.useCallback(e=>{let t=T?S.subscribe(i.jG.batchCalls(e)):l.lQ;return S.updateResult(),t},[S,T]),()=>S.getCurrentResult(),()=>S.getCurrentResult()),f.useEffect(()=>{S.setOptions(p)},[p,S]),I(p,q))throw Q(p,S,c);if(R({result:q,errorResetBoundary:c,throwOnError:p.throwOnError,query:d.getQueryCache().get(p.queryHash),suspense:p.suspense}))throw q.error;if(null==(u=d.getDefaultOptions().queries)||null==(a=u._experimental_afterQuery)||a.call(u,p,q),p.experimental_prefetchInRender&&!l.S$&&C(q,h)){let e=v?Q(p,S,c):null==(o=d.getQueryCache().get(p.queryHash))?void 0:o.promise;null==e||e.catch(l.lQ).finally(()=>{S.updateResult()})}return p.notifyOnChangeProps?q:S.trackResult(q)}(e,o,t)}},6127:(e,t,r)=>{r.d(t,{cr:()=>y,GJ:()=>f,tU:()=>p,ZA:()=>g});var s=r(8413);function i(e,t,r){try{return e(t)}catch(e){return(0,s.R8)("[nuqs] Error while parsing value `%s`: %O"+(r?" (for key `%s`)":""),t,e,r),null}}var n=function(){if("undefined"==typeof window||!window.GestureEvent)return 50;try{let e=navigator.userAgent?.match(/version\/([\d\.]+) safari/i);return parseFloat(e[1])>=17?120:320}catch{return 320}}(),a=new Map,u={history:"replace",scroll:!1,shallow:!0,throttleMs:n},l=new Set,o=0,h=null,c=r(2115);function d(e){function t(t){if(void 0===t)return null;let r="";if(Array.isArray(t)){if(void 0===t[0])return null;r=t[0]}return"string"==typeof t&&(r=t),i(e.parse,r)}return{eq:(e,t)=>e===t,...e,parseServerSide:t,withDefault(e){return{...this,defaultValue:e,parseServerSide(r){var s;return null!=(s=t(r))?s:e}}},withOptions(e){return{...this,...e}}}}var p=d({parse:e=>e,serialize:e=>"".concat(e)}),f=d({parse:e=>{let t=parseInt(e);return Number.isNaN(t)?null:t},serialize:e=>Math.round(e).toFixed()});d({parse:e=>{let t=f.parse(e);return null===t?null:t-1},serialize:e=>f.serialize(e+1)}),d({parse:e=>{let t=parseInt(e,16);return Number.isNaN(t)?null:t},serialize:e=>{let t=Math.round(e).toString(16);return t.padStart(t.length+t.length%2,"0")}}),d({parse:e=>{let t=parseFloat(e);return Number.isNaN(t)?null:t},serialize:e=>e.toString()});var y=d({parse:e=>"true"===e,serialize:e=>e?"true":"false"});function v(e,t){return e.valueOf()===t.valueOf()}d({parse:e=>{let t=parseInt(e);return Number.isNaN(t)?null:new Date(t)},serialize:e=>e.valueOf().toString(),eq:v}),d({parse:e=>{let t=new Date(e);return Number.isNaN(t.valueOf())?null:t},serialize:e=>e.toISOString(),eq:v}),d({parse:e=>{let t=new Date(e.slice(0,10));return Number.isNaN(t.valueOf())?null:t},serialize:e=>e.toISOString().slice(0,10),eq:v});var m=function(e){return{all:e=e||new Map,on:function(t,r){var s=e.get(t);s?s.push(r):e.set(t,[r])},off:function(t,r){var s=e.get(t);s&&(r?s.splice(s.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var s=e.get(t);s&&s.slice().map(function(e){e(r)}),(s=e.get("*"))&&s.slice().map(function(e){e(t,r)})}}}();function g(e){var t,r,d;let{history:p="replace",shallow:f=!0,scroll:y=!1,throttleMs:v=n,parse:g=e=>e,serialize:b=String,eq:R=(e,t)=>e===t,defaultValue:S,clearOnDefault:O=!0,startTransition:w}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{history:"replace",scroll:!1,shallow:!0,throttleMs:n,parse:e=>e,serialize:String,eq:(e,t)=>e===t,clearOnDefault:!0,defaultValue:void 0},C=(0,s.V7)(),I=C.searchParams,Q=(0,c.useRef)(null!=(t=null==I?void 0:I.get(e))?t:null),[q,T]=(0,c.useState)(()=>{var t;let r=a.get(e),s=void 0===r?null!=(t=null==I?void 0:I.get(e))?t:null:r;return null===s?null:i(g,s,e)}),F=(0,c.useRef)(q);(0,s.Yz)("[nuqs `%s`] render - state: %O, iSP: %s",e,q,null!=(r=null==I?void 0:I.get(e))?r:null),(0,c.useEffect)(()=>{var t;let r=null!=(t=null==I?void 0:I.get(e))?t:null;if(r===Q.current)return;let n=null===r?null:i(g,r,e);(0,s.Yz)("[nuqs `%s`] syncFromUseSearchParams %O",e,n),F.current=n,Q.current=r,T(n)},[null==I?void 0:I.get(e),e]),(0,c.useEffect)(()=>{function t(t){let{state:r,query:i}=t;(0,s.Yz)("[nuqs `%s`] updateInternalState %O",e,r),F.current=r,Q.current=i,T(r)}return(0,s.Yz)("[nuqs `%s`] subscribing to sync",e),m.on(e,t),()=>{(0,s.Yz)("[nuqs `%s`] unsubscribing from sync",e),m.off(e,t)}},[e]);let E=(0,c.useCallback)(function(t){var r,i,c,d,g,I,Q,q;let T=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},E="function"==typeof t?t(null!=(i=null!=(r=F.current)?r:S)?i:null):t;(null!=(c=T.clearOnDefault)?c:O)&&null!==E&&void 0!==S&&R(E,S)&&(E=null);let U=function(e,t,r,i){let o=null===t?null:r(t);return(0,s.Yz)("[nuqs queue] Enqueueing %s=%s %O",e,o,i),a.set(e,o),"push"===i.history&&(u.history="push"),i.scroll&&(u.scroll=!0),!1===i.shallow&&(u.shallow=!1),i.startTransition&&l.add(i.startTransition),u.throttleMs=Math.max(i.throttleMs??n,Number.isFinite(u.throttleMs)?u.throttleMs:0),o}(e,E,b,{history:null!=(d=T.history)?d:p,shallow:null!=(g=T.shallow)?g:f,scroll:null!=(I=T.scroll)?I:y,throttleMs:null!=(Q=T.throttleMs)?Q:v,startTransition:null!=(q=T.startTransition)?q:w});return m.emit(e,{state:E,query:U}),function({getSearchParamsSnapshot:e=function(){return new URLSearchParams(location.search)},updateUrl:t,rateLimitFactor:r=1}){return null===h&&(h=new Promise((i,c)=>{if(!Number.isFinite(u.throttleMs)){(0,s.Yz)("[nuqs queue] Skipping flush due to throttleMs=Infinity"),i(e()),setTimeout(()=>{h=null},0);return}function d(){o=performance.now();let[r,d]=function({updateUrl:e,getSearchParamsSnapshot:t}){let r=t();if(0===a.size)return[r,null];let i=Array.from(a.entries()),o={...u},h=Array.from(l);for(let[e,t]of(a.clear(),l.clear(),u.history="replace",u.scroll=!1,u.shallow=!0,u.throttleMs=n,(0,s.Yz)("[nuqs queue] Flushing queue %O with options %O",i,o),i))null===t?r.delete(e):r.set(e,t);try{return function(e,t){let r=s=>{if(s===e.length)return t();let i=e[s];if(!i)throw Error("Invalid transition function");i(()=>r(s+1))};r(0)}(h,()=>{e(r,{history:o.history,scroll:o.scroll,shallow:o.shallow})}),[r,null]}catch(e){return console.error((0,s.z3)(429),i.map(([e])=>e).join(),e),[r,e]}}({updateUrl:t,getSearchParamsSnapshot:e});null===d?i(r):c(r),h=null}setTimeout(function(){let e=performance.now()-o,t=u.throttleMs,i=r*Math.max(0,Math.min(t,t-e));(0,s.Yz)("[nuqs queue] Scheduling flush in %f ms. Throttled at %f ms",i,t),0===i?d():setTimeout(d,i)},0)})),h}(C)},[e,p,f,y,v,w,C.updateUrl,C.getSearchParamsSnapshot,C.rateLimitFactor]);return[null!=(d=null!=q?q:S)?d:null,E]}},8413:(e,t,r)=>{r.d(t,{Hx:()=>c,OB:()=>a,R8:()=>o,V7:()=>d,Yz:()=>l,z3:()=>n});var s=r(2115),i={303:"Multiple adapter contexts detected. This might happen in monorepos.",404:"nuqs requires an adapter to work with your framework.",409:"Multiple versions of the library are loaded. This may lead to unexpected behavior. Currently using `%s`, but `%s` (via the %s adapter) was about to load on top.",414:"Max safe URL length exceeded. Some browsers may not be able to accept this URL. Consider limiting the amount of state stored in the URL.",429:"URL update rate-limited by the browser. Consider increasing `throttleMs` for key(s) `%s`. %O",500:"Empty search params cache. Search params can't be accessed in Layouts.",501:"Search params cache already populated. Have you called `parse` twice?"};function n(e){return`[nuqs] ${i[e]}
  See https://err.47ng.com/NUQS-${e}`}function a(e){if(0===e.size)return"";let t=[];for(let[r,s]of e.entries()){let e=r.replace(/#/g,"%23").replace(/&/g,"%26").replace(/\+/g,"%2B").replace(/=/g,"%3D").replace(/\?/g,"%3F");t.push(`${e}=${s.replace(/%/g,"%25").replace(/\+/g,"%2B").replace(/ /g,"+").replace(/#/g,"%23").replace(/&/g,"%26").replace(/"/g,"%22").replace(/'/g,"%27").replace(/`/g,"%60").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/[\x00-\x1F]/g,e=>encodeURIComponent(e))}`)}return"?"+t.join("&")}var u=function(){try{if("undefined"==typeof localStorage)return!1;let e="nuqs-localStorage-test";localStorage.setItem(e,e);let t=localStorage.getItem(e)===e;if(localStorage.removeItem(e),!t)return!1}catch(e){return console.error("[nuqs]: debug mode is disabled (localStorage unavailable).",e),!1}return(localStorage.getItem("debug")??"").includes("nuqs")}();function l(e,...t){if(!u)return;let r=function(e,...t){return e.replace(/%[sfdO]/g,e=>{let r=t.shift();return"%O"===e&&r?JSON.stringify(r).replace(/"([^"]+)":/g,"$1:"):String(r)})}(e,...t);performance.mark(r);try{console.log(e,...t)}catch(e){console.log(r)}}function o(e,...t){u&&console.warn(e,...t)}var h=(0,s.createContext)({useAdapter(){throw Error(n(404))}});function c(e){return({children:t,...r})=>(0,s.createElement)(h.Provider,{...r,value:{useAdapter:e}},t)}function d(){let e=(0,s.useContext)(h);if(!("useAdapter"in e))throw Error(n(404));return e.useAdapter()}h.displayName="NuqsAdapterContext",u&&"undefined"!=typeof window&&(window.__NuqsAdapterContext&&window.__NuqsAdapterContext!==h&&console.error(n(303)),window.__NuqsAdapterContext=h)},9853:(e,t,r)=>{r.d(t,{X:()=>u,k:()=>l});var s=r(2020),i=r(7165),n=r(6784),a=r(7948),u=class extends a.k{#C;#I;#Q;#e;#q;#T;#F;constructor(e){super(),this.#F=!1,this.#T=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#e=e.client,this.#Q=this.#e.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#C=function(e){let t="function"==typeof e.initialData?e.initialData():e.initialData,r=void 0!==t,s=r?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}(this.options),this.state=e.state??this.#C,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#q?.promise}setOptions(e){this.options={...this.#T,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#Q.remove(this)}setData(e,t){let r=(0,s.pl)(this.state.data,e,this.options);return this.#E({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#E({type:"setState",state:e,setStateOptions:t})}cancel(e){let t=this.#q?.promise;return this.#q?.cancel(e),t?t.then(s.lQ).catch(s.lQ):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#C)}isActive(){return this.observers.some(e=>!1!==(0,s.Eh)(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===s.hT||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===(0,s.d2)(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!(0,s.j3)(this.state.dataUpdatedAt,e))}onFocus(){let e=this.observers.find(e=>e.shouldFetchOnWindowFocus());e?.refetch({cancelRefetch:!1}),this.#q?.continue()}onOnline(){let e=this.observers.find(e=>e.shouldFetchOnReconnect());e?.refetch({cancelRefetch:!1}),this.#q?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#Q.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#q&&(this.#F?this.#q.cancel({revert:!0}):this.#q.cancelRetry()),this.scheduleGc()),this.#Q.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#E({type:"invalidate"})}fetch(e,t){if("idle"!==this.state.fetchStatus){if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#q)return this.#q.continueRetry(),this.#q.promise}if(e&&this.setOptions(e),!this.options.queryFn){let e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}let r=new AbortController,i=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#F=!0,r.signal)})},a=()=>{let e=(0,s.ZM)(this.options,t),r=(()=>{let e={client:this.#e,queryKey:this.queryKey,meta:this.meta};return i(e),e})();return(this.#F=!1,this.options.persister)?this.options.persister(e,r,this):e(r)},u=(()=>{let e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#e,state:this.state,fetchFn:a};return i(e),e})();this.options.behavior?.onFetch(u,this),this.#I=this.state,("idle"===this.state.fetchStatus||this.state.fetchMeta!==u.fetchOptions?.meta)&&this.#E({type:"fetch",meta:u.fetchOptions?.meta});let l=e=>{(0,n.wm)(e)&&e.silent||this.#E({type:"error",error:e}),(0,n.wm)(e)||(this.#Q.config.onError?.(e,this),this.#Q.config.onSettled?.(this.state.data,e,this)),this.scheduleGc()};return this.#q=(0,n.II)({initialPromise:t?.initialPromise,fn:u.fetchFn,abort:r.abort.bind(r),onSuccess:e=>{if(void 0===e)return void l(Error(`${this.queryHash} data is undefined`));try{this.setData(e)}catch(e){l(e);return}this.#Q.config.onSuccess?.(e,this),this.#Q.config.onSettled?.(e,this.state.error,this),this.scheduleGc()},onError:l,onFail:(e,t)=>{this.#E({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#E({type:"pause"})},onContinue:()=>{this.#E({type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0}),this.#q.start()}#E(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...l(t.data,this.options),fetchMeta:e.meta??null};case"success":return{...t,data:e.data,dataUpdateCount:t.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":let r=e.error;if((0,n.wm)(r)&&r.revert&&this.#I)return{...this.#I,fetchStatus:"idle"};return{...t,error:r,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),i.jG.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),this.#Q.notify({query:this,type:"updated",action:e})})}};function l(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:(0,n.v_)(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}}}]);