(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[134],{10:(e,t,a)=>{"use strict";a.d(t,{$v:()=>f,EO:()=>u,Lt:()=>i,Rx:()=>h,Zr:()=>j,ck:()=>m,r7:()=>g,tv:()=>c,wd:()=>x});var s=a(5155);a(2115);var l=a(7649),r=a(9434),n=a(285);function i(e){let{...t}=e;return(0,s.jsx)(l.bL,{"data-slot":"alert-dialog",...t})}function c(e){let{...t}=e;return(0,s.jsx)(l.l9,{"data-slot":"alert-dialog-trigger",...t})}function o(e){let{...t}=e;return(0,s.jsx)(l.ZL,{"data-slot":"alert-dialog-portal",...t})}function d(e){let{className:t,...a}=e;return(0,s.jsx)(l.hJ,{"data-slot":"alert-dialog-overlay",className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function u(e){let{className:t,...a}=e;return(0,s.jsxs)(o,{children:[(0,s.jsx)(d,{}),(0,s.jsx)(l.UC,{"data-slot":"alert-dialog-content",className:(0,r.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a})]})}function x(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,r.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function m(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,r.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function g(e){let{className:t,...a}=e;return(0,s.jsx)(l.hE,{"data-slot":"alert-dialog-title",className:(0,r.cn)("text-lg font-semibold",t),...a})}function f(e){let{className:t,...a}=e;return(0,s.jsx)(l.VY,{"data-slot":"alert-dialog-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...a})}function h(e){let{className:t,...a}=e;return(0,s.jsx)(l.rc,{className:(0,r.cn)((0,n.r)(),t),...a})}function j(e){let{className:t,...a}=e;return(0,s.jsx)(l.ZD,{className:(0,r.cn)((0,n.r)({variant:"outline"}),t),...a})}},970:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ec});var s=a(5155),l=a(8912),r=a(7157),n=a(285),i=a(4968),c=a(7023),o=a(6650),d=a(4616),u=a(6127),x=a(9660),m=a(2960),g=a(2020);function f(){let[e]=(0,u.ZA)("pagina",u.GJ.withDefault(1));return(0,m.I)({queryKey:["list-screens",e],placeholderData:g.rX,queryFn:async()=>(await x.g.get("/screens?page=".concat(e))).data})}var h=a(3904),j=a(5594);let p=j.Ay.object({name:h.E.string(),slug:h.E.slug(),sectorId:h.E.string().uuid()});var v=a(221),b=a(2115),y=a(2177),N=a(6671);let w={"slug-being-used":{name:"slug",message:"Este slug j\xe1 est\xe1 sendo utilizado"}};var E=a(5413),z=a(5041),A=a(9362),C=a(6247),I=a(5937),k=a(5092),T=a(6527),_=a(2085),S=a(9434);let D=(0,_.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function R(e){let{className:t,variant:a,...l}=e;return(0,s.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,S.cn)(D({variant:a}),t),...l})}function Z(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-title",className:(0,S.cn)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",t),...a})}function F(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-description",className:(0,S.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),...a})}var P=a(9409),V=a(5339),L=a(6874),O=a.n(L);function q(){var e,t,a;let l=(0,m.I)({queryKey:["list-all-sectors"],placeholderData:g.rX,queryFn:async()=>(await x.g.get("/sectors/all")).data}),r=(0,y.xW)();if(l.isLoading)return(0,s.jsx)(c.R,{label:"Carregando setores..."});if((null==(e=l.data)?void 0:e.length)===0)return(0,s.jsxs)(R,{variant:"destructive",className:"flex flex-col items-start gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(V.A,{className:"text-destructive size-4"}),(0,s.jsx)(Z,{children:"Setores n\xe3o encontrados"})]}),(0,s.jsxs)(F,{children:[(0,s.jsx)("span",{children:"Nenhum setor foi cadastrado ainda. Para prosseguir com o cadastro de telas, \xe9 necess\xe1rio cadastrar pelo menos um setor."}),(0,s.jsx)(n.$,{variant:"secondary",size:"sm",className:"mt-2",asChild:!0,children:(0,s.jsxs)(O(),{href:"/dashboard/setores",children:[(0,s.jsx)(d.A,{}),"Cadastrar setor"]})})]})]});let i=null!=(a=null==(t=l.data)?void 0:t.map(e=>({id:e.id,label:e.name,value:e.id})))?a:[];return(0,s.jsx)(I.zB,{control:r.control,name:"sectorId",render:e=>{let{field:t}=e;return(0,s.jsxs)(I.eI,{className:"w-full",children:[(0,s.jsx)(I.lR,{children:"Setor"}),(0,s.jsxs)(P.l6,{onValueChange:t.onChange,value:t.value,children:[(0,s.jsx)(I.MJ,{className:"w-full",children:(0,s.jsx)(P.bq,{children:(0,s.jsx)(P.yv,{placeholder:"Selecione um setor"})})}),(0,s.jsx)(P.gC,{children:(0,s.jsxs)(P.s3,{children:[(0,s.jsxs)(P.TR,{children:["Setores (",i.length,")"]}),i.map(e=>(0,s.jsx)(P.eb,{value:e.value,children:e.label},e.id))]})})]}),(0,s.jsx)(I.C5,{})]})}})}function K(e){let{type:t,form:a,onSubmit:l,isOpen:r,setIsOpen:n}=e;return(0,s.jsxs)(C.E.Root,{isOpen:r,setIsOpen:n,children:[(0,s.jsxs)(C.E.Header,{children:[(0,s.jsxs)(C.E.Title,{children:["create"===t?"Criar":"Editar"," tela"]}),(0,s.jsxs)(C.E.Description,{children:["Preencha o formul\xe1rio para ","create"===t?"criar":"editar"," ","uma nova tela"]})]}),(0,s.jsx)(I.lV,{...a,children:(0,s.jsxs)("form",{onSubmit:a.handleSubmit(l),className:"flex h-full flex-col justify-between overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex flex-1 flex-col gap-4 px-4",children:[(0,s.jsx)(k.p,{label:"Nome",name:"name"}),(0,s.jsx)(k.p,{label:"Slug",name:"slug"}),(0,s.jsx)(q,{})]}),(0,s.jsxs)(C.E.Footer,{children:[(0,s.jsx)(T.b,{onSubmitChildren:"Criando",children:"create"===t?"Criar":"Editar"}),(0,s.jsx)(C.E.Close,{children:"Cancelar"})]})]})})]})}function H(){let{createScreenForm:e,onSubmit:t}=function(){let e=(0,y.mN)({resolver:(0,v.u)(p),defaultValues:{name:"",slug:"",sectorId:""}}),t=function(e){let{form:t}=e,a=f();return(0,z.n)({mutationFn:async e=>await x.g.post("/screens",e),onSuccess:()=>{a.refetch()},onError:e=>{e instanceof A.pe&&(0,E.Y)({e:e,form:t,formErrors:w})}})}({form:e}),[,a]=(0,u.ZA)("cadastrar-tela",u.cr),s=(0,b.useCallback)(async s=>{let{name:l,slug:r,sectorId:n}=s;await t.mutateAsync({name:l,slug:r,sectorId:n}),a(null),N.oR.success("Tela cadastrada com sucesso"),e.reset()},[e,t,a]);return{createScreenForm:e,onSubmit:s}}(),a=e.watch("name"),[l,r]=(0,u.ZA)("cadastrar-tela",u.cr.withDefault(!1));return(0,b.useEffect)(()=>{e.setValue("slug",null==a?void 0:a.toLowerCase().replace(/\s+/g,"-"))},[e,a]),(0,s.jsx)(K,{type:"create",form:e,onSubmit:t,isOpen:l,setIsOpen:r})}let U=j.Ay.object({name:h.E.string(),slug:h.E.slug(),sectorId:h.E.string().uuid()});function $(e){let{screenId:t}=e,[,a]=(0,u.ZA)("editar-tela",u.tU.withDefault("")),{editScreenForm:l,onSubmit:r}=function(e){let{screenId:t}=e,a=(0,y.mN)({resolver:(0,v.u)(U),defaultValues:{name:"",slug:"",sectorId:""}}),[s,l]=(0,u.ZA)("editar-tela",u.tU),r=function(e){let{form:t}=e;return(0,z.n)({mutationFn:async e=>{let{screenId:t,...a}=e;return await x.g.put("/screens/".concat(t),a)},onError:e=>{e instanceof A.pe&&(0,E.Y)({e:e,form:t,formErrors:w})}})}({form:a}),n=function(e){let{screenId:t}=e;return(0,m.I)({queryKey:["get-screen",t],queryFn:async()=>(await x.g.get("/screens/".concat(t))).data})}({screenId:t}),i=f(),c=(0,b.useCallback)(async e=>{let{name:s,slug:n,sectorId:c}=e;await r.mutateAsync({screenId:t,name:s,slug:n,sectorId:c}),l(null),i.refetch(),a.reset({name:s}),N.oR.success("Tela atualizada com sucesso")},[a,r,i,t,l]);return(0,b.useEffect)(()=>{if(!n.isLoading){var e,t,s,r,i,c;if(n.isError){N.oR.error("Erro ao buscar tela"),l(null);return}a.setValue("name",null!=(r=null==(e=n.data)?void 0:e.name)?r:""),a.setValue("slug",null!=(i=null==(t=n.data)?void 0:t.slug)?i:""),a.setValue("sectorId",null!=(c=null==(s=n.data)?void 0:s.sectorId)?c:"")}},[n.data,a,n.isLoading,n.isError,l]),{editScreenForm:a,onSubmit:c,isEditingScreen:s,setIsEditingScreen:l}}({screenId:t});return(0,s.jsx)(K,{type:"edit",form:l,onSubmit:r,isOpen:!!t,setIsOpen:()=>a(null)})}var M=a(6126),J=a(6102),G=a(9067),Y=a(3078),B=a(6824),W=a(10),X=a(4838),Q=a(5623),ee=a(6618),et=a(9917),ea=a(2525);function es(e){let{screenId:t}=e,a=(0,z.n)({mutationFn:async e=>{let{screenId:t}=e;return await x.g.delete("/screens/".concat(t))}}),s=f();return{deleteScreenHandler:async function(){await a.mutateAsync({screenId:t}),s.refetch(),N.oR.success("Tela exclu\xedda com sucesso!")}}}function el(e){let{screen:t,children:a}=e,{deleteScreenHandler:l}=es({screenId:t.id});return(0,s.jsxs)(W.Lt,{children:[a,(0,s.jsxs)(W.EO,{children:[(0,s.jsxs)(W.wd,{children:[(0,s.jsx)(W.r7,{children:"Excluir tela"}),(0,s.jsxs)(W.$v,{children:["Tem certeza em excluir a tela"," ",(0,s.jsx)("span",{className:"font-bold",children:t.name}),"? Essa a\xe7\xe3o n\xe3o poder\xe1 ser desfeita."]})]}),(0,s.jsxs)(W.ck,{children:[(0,s.jsx)(W.Zr,{children:"Cancelar"}),(0,s.jsx)(W.Rx,{onClick:()=>l(),className:(0,n.r)({variant:"destructive"}),asChild:!0,children:(0,s.jsxs)(n.$,{children:[(0,s.jsx)(ea.A,{}),"Excluir"]})})]})]})]})}function er(e){let{screen:t}=e,{deleteScreenHandler:a}=es({screenId:t.id}),[,l]=(0,u.ZA)("editar-tela",u.tU.withDefault(""));return(0,s.jsx)(el,{screen:t,children:(0,s.jsxs)(X.rI,{children:[(0,s.jsx)(X.ty,{asChild:!0,children:(0,s.jsx)(n.$,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,s.jsx)(Q.A,{})})}),(0,s.jsxs)(X.SQ,{children:[(0,s.jsx)(X.lp,{children:"A\xe7\xf5es"}),(0,s.jsx)(X.mB,{}),(0,s.jsx)(X._2,{asChild:!0,children:(0,s.jsxs)(O(),{href:"/tela?tela-id=".concat(t.id),className:"w-full",children:[(0,s.jsx)(ee.A,{}),"Visualizar tela"]})}),(0,s.jsxs)(X._2,{onClick:()=>l(t.id),children:[(0,s.jsx)(et.A,{}),"Editar"]}),(0,s.jsx)(X._2,{asChild:!0,children:(0,s.jsxs)(W.tv,{className:"w-full",children:[(0,s.jsx)(ea.A,{className:"text-red-600"}),(0,s.jsx)("span",{className:"text-red-600",children:"Excluir"})]})})]})]})})}let en=[{accessorKey:"name",header:()=>(0,s.jsx)("div",{className:"ml-20",children:"Nome"}),cell:e=>{let{row:t}=e,a=5>(0,G.o)(new Date,t.original.lastDeviceSeenAt),l=(0,Y.m)(t.original.lastDeviceSeenAt,{addSuffix:!0});return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(J.m_,{children:[(0,s.jsx)(J.k$,{className:"flex w-18 justify-end",children:(0,s.jsxs)(M.E,{variant:"outline",className:(0,S.cn)("ml-2 flex items-center gap-1.5 border-0",a?"bg-green-500/15":"bg-red-500/15"),children:[(0,s.jsx)("div",{className:(0,S.cn)("size-1.5 rounded-4xl",a?"bg-green-500":"bg-red-500")}),a?"Ativo":"Inativo"]})}),(0,s.jsx)(J.ZI,{className:(0,S.cn)("flex items-center gap-2",a?"bg-green-600":"bg-red-500"),arrowClassName:(0,S.cn)(a?"bg-green-600 fill-green-600":"bg-red-500 fill-red-500"),children:(0,s.jsx)("span",{className:"text-sm",children:t.original.lastDeviceSeenAt?(0,s.jsxs)(s.Fragment,{children:["\xdaltima atualiza\xe7\xe3o ",l," atr\xe1s"]}):(0,s.jsx)(s.Fragment,{children:"Tela nunca acessada"})})})]}),(0,s.jsx)("span",{children:t.original.name})]})}},{accessorKey:"slug",header:"Slug",cell:e=>{let{row:t}=e;return(0,s.jsx)(M.E,{variant:"secondary",children:t.original.slug})}},{accessorKey:"sectorName",header:"Setor"},{accessorKey:"createdAt",header:"Criado em",cell:e=>{let{row:t}=e;return(0,B.GP)(t.original.createdAt,"dd/MM/yyyy '\xe0s' HH:mm")}},{accessorKey:"updatedAt",header:"Atualizado em",cell:e=>{let{row:t}=e;return t.original.updatedAt?(0,B.GP)(t.original.updatedAt,"dd/MM/yyyy '\xe0s' HH:mm"):"Nunca"}},{accessorKey:"actions",header:"",cell:e=>{let{row:t}=e;return(0,s.jsx)(er,{screen:t.original})}}];function ei(){var e,t,a,l,x,m;let[g]=(0,u.ZA)("editar-tela",u.tU.withDefault("")),[,h]=(0,u.ZA)("cadastrar-tela",u.cr.withDefault(!1)),{data:j,isLoading:p}=f();return(0,s.jsxs)(i.z.Root,{columns:en,data:null!=(e=null==j?void 0:j.items)?e:[],children:[(0,s.jsxs)(i.z.Header,{className:"flex-col items-start gap-3 md:flex-row md:items-end",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)(o.Typography,{variant:"h2",children:"Telas"}),(0,s.jsx)(o.Typography,{variant:"smallText",className:"font-normal opacity-65",children:"Gerencie as telas dispon\xedveis no sistema"})]}),(0,s.jsxs)(n.$,{type:"button",onClick:()=>h(!0),className:"w-full md:w-fit",children:[(0,s.jsx)(d.A,{})," Novo"]}),(0,s.jsx)(H,{}),(0,s.jsx)(r.If,{condition:g,children:(0,s.jsx)($,{screenId:g})})]}),(0,s.jsxs)(r.If,{condition:!p,fallback:(0,s.jsx)(c.R,{label:"Carregando telas..."}),children:[(0,s.jsx)(i.z.Table,{}),(0,s.jsxs)(i.z.Footer,{children:[(0,s.jsx)(i.z.PageContentTotalItems,{currentPageTotalItems:null!=(t=null==j?void 0:j.items.length)?t:0,totalItems:null!=(a=null==j?void 0:j.totalItems)?a:0,pagesTotal:null!=(l=null==j?void 0:j.totalPages)?l:0,page:null!=(x=null==j?void 0:j.page)?x:0,singularText:"tela",pluralText:"telas"}),(0,s.jsx)(i.z.Pagination,{pagesTotal:null!=(m=null==j?void 0:j.totalPages)?m:0})]})]})]})}function ec(){return(0,s.jsxs)(l.D.Root,{children:[(0,s.jsx)(l.D.Header,{children:"Telas"}),(0,s.jsx)(l.D.Content,{children:(0,s.jsx)(ei,{})})]})}},6473:(e,t,a)=>{Promise.resolve().then(a.bind(a,970))},9409:(e,t,a)=>{"use strict";a.d(t,{TR:()=>g,bq:()=>x,eb:()=>f,gC:()=>m,l6:()=>o,s3:()=>d,yv:()=>u});var s=a(5155),l=a(6496),r=a(6474),n=a(5196),i=a(7863);a(2115);var c=a(9434);function o(e){let{...t}=e;return(0,s.jsx)(l.bL,{"data-slot":"select",...t})}function d(e){let{...t}=e;return(0,s.jsx)(l.YJ,{"data-slot":"select-group",...t})}function u(e){let{...t}=e;return(0,s.jsx)(l.WT,{"data-slot":"select-value",...t})}function x(e){let{className:t,size:a="default",children:n,...i}=e;return(0,s.jsxs)(l.l9,{"data-slot":"select-trigger","data-size":a,className:(0,c.cn)("border-input bg-input/20 data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i,children:[n,(0,s.jsx)(l.In,{asChild:!0,children:(0,s.jsx)(r.A,{className:"size-4 opacity-50"})})]})}function m(e){let{className:t,children:a,position:r="popper",...n}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsxs)(l.UC,{"data-slot":"select-content",className:(0,c.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[(0,s.jsx)(h,{}),(0,s.jsx)(l.LM,{className:(0,c.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,s.jsx)(j,{})]})})}function g(e){let{className:t,...a}=e;return(0,s.jsx)(l.JU,{"data-slot":"select-label",className:(0,c.cn)("text-muted-foreground px-2 py-1.5 text-xs",t),...a})}function f(e){let{className:t,children:a,...r}=e;return(0,s.jsxs)(l.q7,{"data-slot":"select-item",className:(0,c.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(l.VF,{children:(0,s.jsx)(n.A,{className:"size-4"})})}),(0,s.jsx)(l.p4,{children:a})]})}function h(e){let{className:t,...a}=e;return(0,s.jsx)(l.PP,{"data-slot":"select-scroll-up-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(i.A,{className:"size-4"})})}function j(e){let{className:t,...a}=e;return(0,s.jsx)(l.wn,{"data-slot":"select-scroll-down-button",className:(0,c.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(r.A,{className:"size-4"})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[352,144,549,128,671,521,875,527,487,824,591,874,186,640,31,323,698,441,684,358],()=>t(6473)),_N_E=e.O()}]);