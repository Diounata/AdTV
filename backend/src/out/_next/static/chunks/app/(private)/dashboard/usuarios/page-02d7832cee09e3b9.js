(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[804],{1749:(e,s,t)=>{Promise.resolve().then(t.bind(t,3005))},3005:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>q});var a=t(5155),l=t(8912),r=t(7157),n=t(285),i=t(4968),o=t(7023),d=t(6650),c=t(4616),u=t(6127),m=t(9660),p=t(2960),x=t(2020);function h(){let[e]=(0,u.ZA)("pagina",u.GJ.withDefault(1));return(0,p.I)({queryKey:["list-users",e],placeholderData:x.rX,queryFn:async()=>(await m.g.get("/users?page=".concat(e))).data})}var f=t(6247),j=t(5937),g=t(5092),v=t(6527),y=t(3904),b=t(6089);let w=t(5594).Ay.object({name:y.E.string(),type:y.E.string(),email:y.E.email,password:y.E.password,repeatPassword:y.E.password}).refine(e=>e.password===e.repeatPassword,{message:b._.password.doesNotMatch,path:["repeatPassword"]});var N=t(221),A=t(2115),z=t(2177),C=t(6671),E=t(5413),D=t(5041),P=t(9362),I=t(4219),T=t(9409);function _(e){let{label:s,placeholder:t,options:l,optionChildren:r,name:n,description:i}=e,o=(0,z.xW)();return(0,a.jsx)(j.zB,{control:o.control,name:n,render:e=>{let{field:n}=e;return(0,a.jsxs)(j.eI,{className:"w-full",children:[(0,a.jsx)(j.lR,{children:s}),(0,a.jsxs)(T.l6,{onValueChange:n.onChange,value:n.value,children:[(0,a.jsx)(j.MJ,{className:"w-full",children:(0,a.jsx)(T.bq,{children:(0,a.jsx)(T.yv,{placeholder:t})})}),(0,a.jsx)(T.gC,{children:l.map(e=>(0,a.jsx)(T.eb,{value:e.value,children:r?r(e):e.label},e.id))})]}),(0,a.jsx)(j.Rr,{children:i}),(0,a.jsx)(j.C5,{})]})}})}function M(){return(0,a.jsx)(_,{label:"Tipo",name:"type",placeholder:"Selecione o tipo de usu\xe1rio",options:[{id:"admin",label:"Administrador",value:"ADMIN"},{id:"default",label:"Padr\xe3o",value:"DEFAULT"}]})}function k(){let[e,s]=(0,u.ZA)("cadastrar-usuario",u.cr.withDefault(!1)),{createUserForm:t,onSubmit:l}=function(){let e=(0,z.mN)({resolver:(0,N.u)(w),defaultValues:{name:"",type:"",email:"",password:"",repeatPassword:""}}),s=function(e){let{form:s}=e,t=h();return(0,D.n)({mutationFn:async e=>await m.g.post("/users",e),onSuccess:()=>{t.refetch()},onError:e=>{e instanceof P.pe&&(0,E.Y)({e:e,form:s,formErrors:I.w})}})}({form:e}),[,t]=(0,u.ZA)("cadastrar-usuario",u.cr),a=(0,A.useCallback)(async a=>{let{name:l,type:r,email:n,password:i}=a;await s.mutateAsync({name:l,type:r,email:n,password:i}),t(!1),C.oR.success("Usu\xe1rio cadastrado com sucesso"),e.reset()},[e,s,t]);return{createUserForm:e,onSubmit:a}}();return(0,a.jsxs)(f.E.Root,{isOpen:e,setIsOpen:s,children:[(0,a.jsxs)(f.E.Header,{children:[(0,a.jsx)(f.E.Title,{children:"Criar usu\xe1rio"}),(0,a.jsx)(f.E.Description,{children:"Preencha o formul\xe1rio para criar um novo usu\xe1rio"})]}),(0,a.jsx)(j.lV,{...t,children:(0,a.jsxs)("form",{onSubmit:t.handleSubmit(l),className:"flex h-full flex-col justify-between overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex flex-1 flex-col gap-4 px-4",children:[(0,a.jsx)(g.p,{label:"Nome",name:"name"}),(0,a.jsx)(M,{}),(0,a.jsx)(g.p,{label:"E-mail",name:"email"}),(0,a.jsx)(g.p,{label:"Senha",name:"password",inputProps:{type:"password"}}),(0,a.jsx)(g.p,{label:"Repetir senha",name:"repeatPassword",inputProps:{type:"password"}})]}),(0,a.jsxs)(f.E.Footer,{children:[(0,a.jsx)(v.b,{onSubmitChildren:"Criando",children:"Criar"}),(0,a.jsx)(f.E.Close,{children:"Cancelar"})]})]})})]})}var R=t(6126),S=t(6824),F=t(4838),H=t(5623),U=t(6715);function K(e){let{user:s}=e,{editUserTypeMutationHandler:t}=function(e){let{user:s}=e,t=function(){let[e]=(0,u.ZA)("pagina",u.GJ.withDefault(1)),s=(0,U.jE)();return(0,D.n)({mutationFn:async e=>await m.g.put("/users/type",e),onSuccess:(t,a,l)=>{s.setQueryData(["list-users",e],e=>e?{...e,items:e.items.map(e=>e.id===a.userId?{...e,type:a.type}:e)}:e)}})}();return{editUserTypeMutationHandler:async()=>{await t.mutateAsync({userId:s.id,type:"ADMIN"===s.type?"DEFAULT":"ADMIN"}),C.oR.success("Tipo de usu\xe1rio atualizado com sucesso")}}}({user:s});return(0,a.jsxs)(F.rI,{children:[(0,a.jsx)(F.ty,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,a.jsx)(H.A,{})})}),(0,a.jsxs)(F.SQ,{children:[(0,a.jsx)(F.lp,{children:"A\xe7\xf5es"}),(0,a.jsx)(F.mB,{}),(0,a.jsx)(F._2,{onClick:t,children:(0,a.jsxs)("p",{children:["Definir como",(0,a.jsx)("span",{className:"ml-1 font-semibold",children:"ADMIN"===s.type?"PADR\xc3O":"ADMIN"})]})})]})]})}let O=[{accessorKey:"name",header:()=>(0,a.jsx)("span",{className:"pl-18",children:"Nome"}),cell:e=>{let{row:s}=e,t=s.original.name||"Sem nome";return(0,a.jsxs)("p",{className:"line-clamp-1 truncate text-pretty",children:[(0,a.jsx)(R.E,{variant:"outline",className:"mr-2 w-16",children:"ADMIN"===s.original.type?"ADMIN":"PADR\xc3O"}),t]})}},{accessorKey:"email",header:"E-mail",cell:e=>{let{row:s}=e;return s.original.email||"-"}},{accessorKey:"createdAt",header:"Criado em",cell:e=>{let{row:s}=e;return(0,S.GP)(s.original.createdAt,"dd/MM/yyyy '\xe0s' HH:mm")}},{accessorKey:"updatedAt",header:"Atualizado em",cell:e=>{let{row:s}=e;return s.original.updatedAt?(0,S.GP)(s.original.updatedAt,"dd/MM/yyyy '\xe0s' HH:mm"):"Nunca"}},{accessorKey:"actions",header:"",cell:e=>{let{row:s}=e;return(0,a.jsx)(K,{user:s.original})}}];function Z(){var e,s,t,l,m,p;let[,x]=(0,u.ZA)("cadastrar-usuario",u.cr.withDefault(!1)),{data:f,isLoading:j}=h();return(0,a.jsxs)(i.z.Root,{columns:O,data:null!=(e=null==f?void 0:f.items)?e:[],children:[(0,a.jsxs)(i.z.Header,{className:"flex-col items-start gap-3 md:flex-row md:items-end",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(d.Typography,{variant:"h2",children:"Usu\xe1rios"}),(0,a.jsx)(d.Typography,{variant:"smallText",className:"font-normal opacity-65",children:"Gerencie os usu\xe1rios dispon\xedveis no sistema"})]}),(0,a.jsxs)(n.$,{type:"button",onClick:()=>x(!0),className:"w-full md:w-fit",children:[(0,a.jsx)(c.A,{})," Novo"]}),(0,a.jsx)(k,{})]}),(0,a.jsxs)(r.If,{condition:!j,fallback:(0,a.jsx)(o.R,{label:"Carregando usu\xe1rios..."}),children:[(0,a.jsx)(i.z.Table,{}),(0,a.jsxs)(i.z.Footer,{children:[(0,a.jsx)(i.z.PageContentTotalItems,{currentPageTotalItems:null!=(s=null==f?void 0:f.items.length)?s:0,totalItems:null!=(t=null==f?void 0:f.totalItems)?t:0,pagesTotal:null!=(l=null==f?void 0:f.totalPages)?l:0,page:null!=(m=null==f?void 0:f.page)?m:0,singularText:"usu\xe1rio",pluralText:"usu\xe1rios"}),(0,a.jsx)(i.z.Pagination,{pagesTotal:null!=(p=null==f?void 0:f.totalPages)?p:0})]})]})]})}function q(){return(0,a.jsxs)(l.D.Root,{children:[(0,a.jsx)(l.D.Header,{children:"Usu\xe1rios"}),(0,a.jsx)(l.D.Content,{children:(0,a.jsx)(Z,{})})]})}},4219:(e,s,t)=>{"use strict";t.d(s,{w:()=>a});let a={"email-being-used":{name:"email",message:"Este e-mail j\xe1 est\xe1 sendo utilizado"},"account-not-found":{name:"email",message:"Conta n\xe3o encontrada"},"invalid-credentials":{name:"password",message:"Credenciais inv\xe1lidas"}}},9409:(e,s,t)=>{"use strict";t.d(s,{TR:()=>x,bq:()=>m,eb:()=>h,gC:()=>p,l6:()=>d,s3:()=>c,yv:()=>u});var a=t(5155),l=t(6496),r=t(6474),n=t(5196),i=t(7863);t(2115);var o=t(9434);function d(e){let{...s}=e;return(0,a.jsx)(l.bL,{"data-slot":"select",...s})}function c(e){let{...s}=e;return(0,a.jsx)(l.YJ,{"data-slot":"select-group",...s})}function u(e){let{...s}=e;return(0,a.jsx)(l.WT,{"data-slot":"select-value",...s})}function m(e){let{className:s,size:t="default",children:n,...i}=e;return(0,a.jsxs)(l.l9,{"data-slot":"select-trigger","data-size":t,className:(0,o.cn)("border-input bg-input/20 data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...i,children:[n,(0,a.jsx)(l.In,{asChild:!0,children:(0,a.jsx)(r.A,{className:"size-4 opacity-50"})})]})}function p(e){let{className:s,children:t,position:r="popper",...n}=e;return(0,a.jsx)(l.ZL,{children:(0,a.jsxs)(l.UC,{"data-slot":"select-content",className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:r,...n,children:[(0,a.jsx)(f,{}),(0,a.jsx)(l.LM,{className:(0,o.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,a.jsx)(j,{})]})})}function x(e){let{className:s,...t}=e;return(0,a.jsx)(l.JU,{"data-slot":"select-label",className:(0,o.cn)("text-muted-foreground px-2 py-1.5 text-xs",s),...t})}function h(e){let{className:s,children:t,...r}=e;return(0,a.jsxs)(l.q7,{"data-slot":"select-item",className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...r,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(l.VF,{children:(0,a.jsx)(n.A,{className:"size-4"})})}),(0,a.jsx)(l.p4,{children:t})]})}function f(e){let{className:s,...t}=e;return(0,a.jsx)(l.PP,{"data-slot":"select-scroll-up-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(i.A,{className:"size-4"})})}function j(e){let{className:s,...t}=e;return(0,a.jsx)(l.wn,{"data-slot":"select-scroll-down-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(r.A,{className:"size-4"})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[352,144,549,128,671,521,875,527,487,824,591,186,31,323,698,441,684,358],()=>s(1749)),_N_E=e.O()}]);