(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[470],{10:(e,t,a)=>{"use strict";a.d(t,{$v:()=>h,EO:()=>u,Lt:()=>o,Rx:()=>g,Zr:()=>p,ck:()=>m,r7:()=>f,tv:()=>i,wd:()=>x});var r=a(5155);a(2115);var s=a(7649),l=a(9434),n=a(285);function o(e){let{...t}=e;return(0,r.jsx)(s.bL,{"data-slot":"alert-dialog",...t})}function i(e){let{...t}=e;return(0,r.jsx)(s.l9,{"data-slot":"alert-dialog-trigger",...t})}function c(e){let{...t}=e;return(0,r.jsx)(s.ZL,{"data-slot":"alert-dialog-portal",...t})}function d(e){let{className:t,...a}=e;return(0,r.jsx)(s.hJ,{"data-slot":"alert-dialog-overlay",className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function u(e){let{className:t,...a}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(d,{}),(0,r.jsx)(s.UC,{"data-slot":"alert-dialog-content",className:(0,l.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a})]})}function x(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,l.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function m(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,l.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function f(e){let{className:t,...a}=e;return(0,r.jsx)(s.hE,{"data-slot":"alert-dialog-title",className:(0,l.cn)("text-lg font-semibold",t),...a})}function h(e){let{className:t,...a}=e;return(0,r.jsx)(s.VY,{"data-slot":"alert-dialog-description",className:(0,l.cn)("text-muted-foreground text-sm",t),...a})}function g(e){let{className:t,...a}=e;return(0,r.jsx)(s.rc,{className:(0,l.cn)((0,n.r)(),t),...a})}function p(e){let{className:t,...a}=e;return(0,r.jsx)(s.ZD,{className:(0,l.cn)((0,n.r)({variant:"outline"}),t),...a})}},2525:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},4128:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>q});var r=a(5155),s=a(8912),l=a(7157),n=a(285),o=a(4968),i=a(7023),c=a(6650),d=a(4616),u=a(6127),x=a(9660),m=a(2960),f=a(2020);function h(){let[e]=(0,u.ZA)("pagina",u.GJ.withDefault(1));return(0,m.I)({queryKey:["list-sectors",e],placeholderData:f.rX,queryFn:async()=>(await x.g.get("/sectors?page=".concat(e))).data})}var g=a(3904),p=a(5594);let j=p.Ay.object({name:g.E.string(),slug:g.E.slug()});var y=a(221),v=a(2115),A=a(2177),b=a(6671);let w={"slug-being-used":{name:"slug",message:"Este slug j\xe1 est\xe1 sendo utilizado"}};var N=a(5413),E=a(5041),C=a(9362),D=a(6247),k=a(5937),R=a(5092),I=a(6527);function z(e){let{type:t,form:a,onSubmit:s,isOpen:l,setIsOpen:n}=e;return(0,r.jsxs)(D.E.Root,{isOpen:l,setIsOpen:n,children:[(0,r.jsxs)(D.E.Header,{children:[(0,r.jsxs)(D.E.Title,{children:["create"===t?"Criar":"Editar"," setor"]}),(0,r.jsxs)(D.E.Description,{children:["Preencha o formul\xe1rio para ","create"===t?"criar":"editar"," um novo setor"]})]}),(0,r.jsx)(k.lV,{...a,children:(0,r.jsxs)("form",{onSubmit:a.handleSubmit(s),className:"flex h-full flex-col justify-between overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex flex-1 flex-col gap-4 px-4",children:[(0,r.jsx)(R.p,{label:"Nome",name:"name"}),(0,r.jsx)(R.p,{label:"Slug",name:"slug"})]}),(0,r.jsxs)(D.E.Footer,{children:[(0,r.jsx)(I.b,{onSubmitChildren:"Criando",children:"create"===t?"Criar":"Editar"}),(0,r.jsx)(D.E.Close,{children:"Cancelar"})]})]})})]})}function S(){let{createSectorForm:e,onSubmit:t}=function(){let e=(0,A.mN)({resolver:(0,y.u)(j),defaultValues:{name:"",slug:""}}),t=function(e){let{form:t}=e,a=h();return(0,E.n)({mutationFn:async e=>await x.g.post("/sectors",e),onSuccess:()=>{a.refetch()},onError:e=>{e instanceof C.pe&&(0,N.Y)({e:e,form:t,formErrors:w})}})}({form:e}),[,a]=(0,u.ZA)("cadastrar-setor",u.cr),r=(0,v.useCallback)(async r=>{let{name:s,slug:l}=r;await t.mutateAsync({name:s,slug:l}),a(null),b.oR.success("Setor cadastrado com sucesso"),e.reset()},[e,t,a]);return{createSectorForm:e,onSubmit:r}}(),a=e.watch("name"),[s,l]=(0,u.ZA)("cadastrar-setor",u.cr.withDefault(!1));return(0,v.useEffect)(()=>{e.setValue("slug",null==a?void 0:a.toLowerCase().replace(/\s+/g,"-"))},[e,a]),(0,r.jsx)(z,{type:"create",form:e,onSubmit:t,isOpen:s,setIsOpen:l})}let O=p.Ay.object({name:g.E.string(),slug:g.E.slug()});function T(e){let{sectorId:t}=e,[,a]=(0,u.ZA)("editar-setor",u.tU.withDefault("")),{editSectorForm:s,onSubmit:l}=function(e){let{sectorId:t}=e,a=(0,A.mN)({resolver:(0,y.u)(O),defaultValues:{name:"",slug:""}}),[r,s]=(0,u.ZA)("editar-setor",u.tU),l=function(e){let{form:t}=e;return(0,E.n)({mutationFn:async e=>{let{sectorId:t,...a}=e;return await x.g.put("/sectors/".concat(t),a)},onError:e=>{e instanceof C.pe&&(0,N.Y)({e:e,form:t,formErrors:w})}})}({form:a}),n=function(e){let{sectorId:t}=e;return(0,m.I)({queryKey:["get-sector",t],queryFn:async()=>(await x.g.get("/sectors/".concat(t))).data.sector})}({sectorId:t}),o=h(),i=(0,v.useCallback)(async e=>{let{name:r,slug:n}=e;await l.mutateAsync({sectorId:t,name:r,slug:n}),s(null),o.refetch(),a.reset({name:r}),b.oR.success("Setor atualizado com sucesso")},[a,l,o,t,s]);return(0,v.useEffect)(()=>{if(!n.isLoading){var e,t,r,l;if(n.isError){b.oR.error("Erro ao buscar setor"),s(null);return}a.setValue("name",null!=(r=null==(e=n.data)?void 0:e.name)?r:""),a.setValue("slug",null!=(l=null==(t=n.data)?void 0:t.slug)?l:"")}},[n.data,a,n.isLoading,n.isError,s]),{editSectorForm:a,onSubmit:i,isEditingSector:r,setIsEditingSector:s}}({sectorId:t});return(0,r.jsx)(z,{type:"edit",form:s,onSubmit:l,isOpen:!!t,setIsOpen:()=>a(null)})}var Z=a(6126),L=a(6824),H=a(10),P=a(4838),V=a(5623),F=a(9917),K=a(2525);function M(e){let{sectorId:t}=e,a=(0,E.n)({mutationFn:async e=>{let{sectorId:t}=e;return await x.g.delete("/sectors/".concat(t))}}),r=h();return{deleteSectorHandler:async function(){await a.mutateAsync({sectorId:t}),r.refetch(),b.oR.success("Setor exclu\xeddo com sucesso!")}}}function _(e){let{sector:t,children:a}=e,{deleteSectorHandler:s}=M({sectorId:t.id});return(0,r.jsxs)(H.Lt,{children:[a,(0,r.jsxs)(H.EO,{children:[(0,r.jsxs)(H.wd,{children:[(0,r.jsx)(H.r7,{children:"Excluir setor"}),(0,r.jsxs)(H.$v,{children:["Tem certeza em excluir o setor"," ",(0,r.jsx)("span",{className:"font-bold",children:t.name}),"? Essa a\xe7\xe3o n\xe3o poder\xe1 ser desfeita."]})]}),(0,r.jsxs)(H.ck,{children:[(0,r.jsx)(H.Zr,{children:"Cancelar"}),(0,r.jsx)(H.Rx,{onClick:()=>s(),className:(0,n.r)({variant:"destructive"}),asChild:!0,children:(0,r.jsxs)(n.$,{children:[(0,r.jsx)(K.A,{}),"Excluir"]})})]})]})]})}function U(e){let{sector:t}=e,{deleteSectorHandler:a}=M({sectorId:t.id}),[,s]=(0,u.ZA)("editar-setor",u.tU.withDefault(""));return(0,r.jsx)(_,{sector:t,children:(0,r.jsxs)(P.rI,{children:[(0,r.jsx)(P.ty,{asChild:!0,children:(0,r.jsx)(n.$,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,r.jsx)(V.A,{})})}),(0,r.jsxs)(P.SQ,{children:[(0,r.jsx)(P.lp,{children:"A\xe7\xf5es"}),(0,r.jsx)(P.mB,{}),(0,r.jsxs)(P._2,{onClick:()=>s(t.id),children:[(0,r.jsx)(F.A,{}),"Editar"]}),(0,r.jsx)(P._2,{asChild:!0,children:(0,r.jsxs)(H.tv,{className:"w-full",children:[(0,r.jsx)(K.A,{className:"text-red-600"}),(0,r.jsx)("span",{className:"text-red-600",children:"Excluir"})]})})]})]})})}let Y=[{accessorKey:"name",header:"Nome"},{accessorKey:"slug",header:"Slug",cell:e=>{let{row:t}=e;return(0,r.jsx)(Z.E,{variant:"secondary",children:t.original.slug})}},{accessorKey:"screensCount",header:"Total de telas",cell:e=>{let{row:t}=e,a=t.original.screensCount;return 0===a?"Nenhuma":"".concat(a," tela").concat(a>1?"s":"")}},{accessorKey:"createdAt",header:"Criado em",cell:e=>{let{row:t}=e;return(0,L.GP)(t.original.createdAt,"dd/MM/yyyy '\xe0s' HH:mm")}},{accessorKey:"updatedAt",header:"Atualizado em",cell:e=>{let{row:t}=e;return t.original.updatedAt?(0,L.GP)(t.original.updatedAt,"dd/MM/yyyy '\xe0s' HH:mm"):"Nunca"}},{accessorKey:"actions",header:"",cell:e=>{let{row:t}=e;return(0,r.jsx)(U,{sector:t.original})}}];function $(){var e,t,a,s,x,m;let[f]=(0,u.ZA)("editar-setor",u.tU.withDefault("")),[,g]=(0,u.ZA)("cadastrar-setor",u.cr.withDefault(!1)),{data:p,isLoading:j}=h();return(0,r.jsxs)(o.z.Root,{columns:Y,data:null!=(e=null==p?void 0:p.items)?e:[],children:[(0,r.jsxs)(o.z.Header,{className:"flex-col items-start gap-3 md:flex-row md:items-end",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)(c.Typography,{variant:"h2",children:"Setores"}),(0,r.jsx)(c.Typography,{variant:"smallText",className:"font-normal opacity-65",children:"Gerencie os setores dispon\xedveis no sistema"})]}),(0,r.jsxs)(n.$,{type:"button",onClick:()=>g(!0),className:"w-full md:w-fit",children:[(0,r.jsx)(d.A,{})," Novo"]}),(0,r.jsx)(S,{}),(0,r.jsx)(l.If,{condition:f,children:(0,r.jsx)(T,{sectorId:f})})]}),(0,r.jsxs)(l.If,{condition:!j,fallback:(0,r.jsx)(i.R,{label:"Carregando setores..."}),children:[(0,r.jsx)(o.z.Table,{}),(0,r.jsxs)(o.z.Footer,{children:[(0,r.jsx)(o.z.PageContentTotalItems,{currentPageTotalItems:null!=(t=null==p?void 0:p.items.length)?t:0,totalItems:null!=(a=null==p?void 0:p.totalItems)?a:0,pagesTotal:null!=(s=null==p?void 0:p.totalPages)?s:0,page:null!=(x=null==p?void 0:p.page)?x:0,singularText:"setor",pluralText:"setores"}),(0,r.jsx)(o.z.Pagination,{pagesTotal:null!=(m=null==p?void 0:p.totalPages)?m:0})]})]})]})}function q(){return(0,r.jsxs)(s.D.Root,{children:[(0,r.jsx)(s.D.Header,{children:"Setores"}),(0,r.jsx)(s.D.Content,{children:(0,r.jsx)($,{})})]})}},5623:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},7649:(e,t,a)=>{"use strict";a.d(t,{UC:()=>Z,VY:()=>V,ZD:()=>H,ZL:()=>O,bL:()=>z,hE:()=>P,hJ:()=>T,l9:()=>S,rc:()=>L});var r=a(2115),s=a(6081),l=a(6101),n=a(2147),o=a(5185),i=a(9708),c=a(5155),d="AlertDialog",[u,x]=(0,s.A)(d,[n.Hs]),m=(0,n.Hs)(),f=e=>{let{__scopeAlertDialog:t,...a}=e,r=m(t);return(0,c.jsx)(n.bL,{...r,...a,modal:!0})};f.displayName=d;var h=r.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,s=m(a);return(0,c.jsx)(n.l9,{...s,...r,ref:t})});h.displayName="AlertDialogTrigger";var g=e=>{let{__scopeAlertDialog:t,...a}=e,r=m(t);return(0,c.jsx)(n.ZL,{...r,...a})};g.displayName="AlertDialogPortal";var p=r.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,s=m(a);return(0,c.jsx)(n.hJ,{...s,...r,ref:t})});p.displayName="AlertDialogOverlay";var j="AlertDialogContent",[y,v]=u(j),A=(0,i.Dc)("AlertDialogContent"),b=r.forwardRef((e,t)=>{let{__scopeAlertDialog:a,children:s,...i}=e,d=m(a),u=r.useRef(null),x=(0,l.s)(t,u),f=r.useRef(null);return(0,c.jsx)(n.G$,{contentName:j,titleName:w,docsSlug:"alert-dialog",children:(0,c.jsx)(y,{scope:a,cancelRef:f,children:(0,c.jsxs)(n.UC,{role:"alertdialog",...d,...i,ref:x,onOpenAutoFocus:(0,o.m)(i.onOpenAutoFocus,e=>{var t;e.preventDefault(),null==(t=f.current)||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,c.jsx)(A,{children:s}),(0,c.jsx)(I,{contentRef:u})]})})})});b.displayName=j;var w="AlertDialogTitle",N=r.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,s=m(a);return(0,c.jsx)(n.hE,{...s,...r,ref:t})});N.displayName=w;var E="AlertDialogDescription",C=r.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,s=m(a);return(0,c.jsx)(n.VY,{...s,...r,ref:t})});C.displayName=E;var D=r.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,s=m(a);return(0,c.jsx)(n.bm,{...s,...r,ref:t})});D.displayName="AlertDialogAction";var k="AlertDialogCancel",R=r.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,{cancelRef:s}=v(k,a),o=m(a),i=(0,l.s)(t,s);return(0,c.jsx)(n.bm,{...o,...r,ref:i})});R.displayName=k;var I=e=>{let{contentRef:t}=e,a="`".concat(j,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(j,"` by passing a `").concat(E,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(j,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return r.useEffect(()=>{var e;document.getElementById(null==(e=t.current)?void 0:e.getAttribute("aria-describedby"))||console.warn(a)},[a,t]),null},z=f,S=h,O=g,T=p,Z=b,L=D,H=R,P=N,V=C},8139:(e,t,a)=>{Promise.resolve().then(a.bind(a,4128))},9917:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[352,144,549,128,671,521,875,527,487,824,591,31,323,698,441,684,358],()=>t(8139)),_N_E=e.O()}]);